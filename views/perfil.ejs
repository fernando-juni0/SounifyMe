<!DOCTYPE html>
<html>
<head>
    <%- include('./reusable/head.ejs') %>
    <title>Perfil - <%= userProfile.displayName %></title>
    <link rel="stylesheet" href="../public/css/perfil.css">
</head>
<body data-isMy="<%= userProfile.isMyProfile %>">
    <div id="body-containner">
        <%- include('./reusable/reload.ejs') %>
        <div id="containner">
            <%- include('./reusable/header.ejs',{banda:user.banda, index:null,perfil:{nome:user.displayName,profileImg:user.profilePic == null ? "../public/img/logo_icon.png" : user.profilePic} }) %>
            
            <div id="folow-info-popup-containner" style="display: none;" >
                <div id="close-popup-out"></div>
                <div id="folow-info-popup-content">
                    <div data-page-seguindo="1"  id="seguindo-popup">
                        <div class="folow-info-title-containner">
                            <h1 class="folow-info-title">Seguindo</h1>
                            <div class="close-popup">
                                <img src="../public/assets/svg/close_g0xorss70bu5.svg" alt="">
                            </div>
                        </div>
                        <div class="linha"></div>
                        <div class="folow-info-row">
                            
                        </div>
                     </div> 
                    <div data-page-seguidores="1" style="display: none;" id="seguidores-popup">
                        <div class="folow-info-title-containner">
                            <h1 class="folow-info-title">Seguidores</h1>
                            <div class="close-popup">
                                <img src="../public/assets/svg/close_g0xorss70bu5.svg" alt="">
                            </div>
                        </div>
                        <div class="linha"></div>
                        <div class="folow-info-row">
                            
                        </div>
                    </div>
                </div>
            </div>
            <% if (userProfile.isMyProfile == true) { %> 
                <div id="edit-profile-popup-containner" style="display: none;" class="flex-center">
                    <div id="close-popup-out-edit"></div>
                    <div id="edit-profile-popup">
                        <div id="top-edit-containner">
                            <h1 id="edit-profile-title">Editar Perfil</h1>
                            <div id="close-edit">
                                <img src="../public/assets/svg/close_g0xorss70bu5.svg">
                            </div>
                        </div>
                        <div id="edit-profile-content">
                            <div id="edit-profile-photo">
                                <img id="imgDisplayUser" src="<%= userProfile.profilePic %>">
                                <div id="edit-photo">
                                    <input type="file" accept="image/*" name="profileImg" id="inputFile-profileImg">
                                </div>
                            </div>
                            <div id="edit-profile-displayName">
                                
                                <label id="input-displayName-label" for="input-displayName">Username</label>
                                <input name="displayName" value="<%= userProfile.displayName %>" placeholder="Username" id="input-displayName" type="text">
                                <div id="button-save-containner">
                                    <input id="save-edit" type="submit" value="Salvar">
                                </div>
                                
                            </div>

                        </div>
                        <div id="edit-desc">
                            <span id="desc-infos-span">Ao continuar, você autoriza o SounifyMe a acessar a imagem enviada. Certifique-se de que você tem o direito de fazer o upload dessa imagem.</span>
                        </div>
                    </div>
                </div>
                <div id="edit-banner-containner">
                    <div id="close-popup-banner-edit"></div>
                    <div id="edit-banner-content">
                        <div id="top-banner-edit">
                            <h1 id="title-popup-banner">Escolha o Estilo</h1>
                            <img id="close-popup-banner" src="../public/assets/svg/close_g0xorss70bu5.svg" alt="">
                        </div>
                        <div id="circle-banner-containner">
                            <div id="edit-banner-img">
                                <input type="file" hidden name="profileBannerImg" id="profile-banner-input-img">
                                <div id="circle-img" class="circle-containner flex-center">
                                    <img src="../public/assets/svg/icons8-adicionar-imagem-48 (1).png">
                                </div>
                                <label class="title-circle-banner">Enviar Imagem</label>
                            </div>
                            <div id="edit-banner-color">
                                <div id="circle-color" data-bannerColor="<%= userProfile.banner.type == 'color' ? userProfile.banner.content : "" %>" class="circle-containner flex-center">
                                    <img src="../public/assets/svg/icons8-conta-gotas-24.png">
                                </div>
                                <label class="title-circle-banner">Enviar Cor</label>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="edit-banner-color-containner" class="flex-containner">
                    <div id="close-popup-banner-edit-color" class="flex-containner"></div>
                    <div id="edit-banner-color-content">
                        <div id="preview-color"><input type="color" style="opacity: 0;" name="profileBannerColor" id="profile-banner-input-color"></div>
                        <div id="button-containner">
                            <button id="save-color-banner">Salvar</button>
                        </div>
                    </div>
                </div>
            <% } %>
            <main id="main-containner">
               <div id="main-content">
                    <div id="perfil-continner">
                        <div id="banner-continner" data-type="<%= userProfile.banner.type %>">
                            <% if (userProfile.banner.type == 'color') { %>
                                <div id="banner-color" data-color="<%= userProfile.banner.content %>">
                                    <% if (userProfile.isMyProfile == true) { %> 
                                        <div class="banner-profile-class"></div>
                                    <% } %>
                                </div>
                            <% }else{ %>
                                <div id="banner-img">
                                    <% if (userProfile.isMyProfile == true) { %> 
                                        <div class="banner-profile-class"></div>
                                    <% } %>
                                    <img src="<%= userProfile.banner.content %>">
                                </div>
                            <% } %>
                        </div>
                        <div id="user-containner">
                            <div id="profile-pic" class="flex-center">
                                <img id="profile-pic-img" src="<%= userProfile.profilePic %>">
                            </div>
                            <div id="user-info-containner">
                                <div id="user-info-content" >
                                    <div id="displayName-containner">
                                        <span id="displayName-profile" title="<%= userProfile.displayName%>"><%= userProfile.displayName%></span>
                                    </div>
                                    <div id="user-info-other" class="flex-center"> 
                                        <span id="playlist"><span class="number-info"><%= userProfile.playlist.length %></span><br> Playlists</span>
                                        <span id="seguidores"><span class="number-info"><%= userProfile.folowInfo.seguidores.length %></span><br> Seguidores</span>
                                        <span id="seguindo"><span class="number-info"><%= userProfile.folowInfo.seguindo.length %></span><br> Seguindo</span>
                                    </div>
                                </div>
                                <div id="profile-button-containner">
                                     <% if (userProfile.isMyProfile == false) { %> 
                                        <% if (user.blockedUsers.includes(userProfile.uid) == true) { %>
                                            <div id="desblock-Button">
                                                <button id="desblock">Desbloquear</button>
                                            </div>
                                        <% }else{ %>
                                            <div id="folow-button">
                                                <button data-folow="<%= userProfile.isFolow %>" class="profile-button <%=  userProfile.isFolow == true ? "seguindo" : "" %>" id="button-seguir"></button>
                                                
                                                <div id="options-folow-user-containner">
                                                    <div id="close-options-folow-user"></div>
                                                    <div id="options-folow-user-content">
                                                        <ul id="options-folow-user-containner-list">
                                                            <li id="bloquearUser" class="optinosUser-containner-list-item blok"><svg class="optionsUser-containner-list-item-svg" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 468.293 468.293" style="enable-background:new 0 0 468.293 468.293;" xml:space="preserve"><path style="fill:#D15241;" d="M234.146,0C104.898,0,0,104.898,0,234.146s104.898,234.146,234.146,234.146 s234.146-104.898,234.146-234.146S363.395,0,234.146,0z M66.185,234.146c0-93.034,75.551-168.585,167.961-168.585 c34.966,0,68.059,10.615,94.907,29.346L95.532,329.054C76.8,302.205,66.185,269.112,66.185,234.146z M234.146,402.107 c-34.966,0-68.059-10.615-94.907-29.346l233.522-233.522c18.732,26.849,29.346,59.941,29.346,94.907 C402.107,327.18,327.18,402.107,234.146,402.107z"></path></svg> Bloquear</li>
                                                            <li id="denunciarUser" class="optinosUser-containner-list-item"><svg class="optionsUser-containner-list-item-svg" version="1.0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32.000000 32.000000" preserveAspectRatio="xMidYMid meet"><g transform="translate(0.000000,32.000000) scale(0.100000,-0.100000)" fill="#000000" stroke="none"><path d="M183 294 c-23 -23 -25 -30 -18 -82 4 -31 8 -58 8 -58 1 -1 26 2 56 6 39 5 60 13 73 30 63 78 -47 175 -119 104z m97 -14 c41 -41 9 -100 -55 -100 -19 0 -35 4 -35 9 0 5 -3 22 -6 39 -12 58 54 94 96 52z"/><path d="M230 255 c0 -14 5 -25 10 -25 6 0 10 11 10 25 0 14 -4 25 -10 25 -5 0 -10 -11 -10 -25z"/><path d="M230 210 c0 -5 5 -10 10 -10 6 0 10 5 10 10 0 6 -4 10 -10 10 -5 0-10 -4 -10 -10z"/><path d="M40 210 c-22 -22 -25 -42 -10 -70 8 -15 6 -24 -10 -40 -20 -20 -27 -50 -12 -50 5 0 14 11 20 25 21 45 92 42 107 -5 3 -11 11 -20 16 -20 16 0 10 29 -11 50 -16 16 -18 25 -10 40 5 10 10 26 10 34 0 22 -36 56 -60 56 -11 0 -29 -9 -40 -20z m70 -15 c15 -18 10 -45 -12 -59 -35 -22 -74 27 -48 59 16 19 44 19 60 0z"/></g></svg> Denunciar</li>
                                                            <li id="pararDeSeguir" class="optinosUser-containner-list-item" style="white-space: nowrap; text-align: center; color: rgb(255, 0, 0); font: 500 1em 'inter',sans-serif;">Parar de seguir</li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                
                                            </div>
                                        <% } %>
                                        
                                     <% }else{ %> 
                                        <div id="edit-button">
                                            <button id="button-editar">Editar Perfil</button>
                                        </div>
                                     <% } %> 
                                    
                                </div>
                            </div>
                        </div>
                    </div>
                    <% if (user.blockedUsers.includes(userProfile.uid) == false) { %>
                        <div id="library-containnner">
                            <div id="library-content">  
                                <div id="library-row-containnner">
                                    <div class="library-row">
                                        <div class="library-row-title">
                                            <h1 class="h1-title">Playlists</h1>
                                        </div>
                                        <div class="library-col-containner">
                                            <div class="library-col">
                                                <div class="library-col-img-containner">
                                                    <img src="../public/img/exempleImg.jpg" alt="" class="library-col-img">
                                                </div>
                                                <div class="library-col-desc-containner">
                                                    <div class="library-col-desc-title">
                                                        <p class="p-desc-title">PlaylistTeste</p>
                                                    </div>
                                                    <div class="library-col-desc-music-number">
                                                        <p class="p-desc-music-number">10 Musicas</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>




                    <% } %>
               </div>
            </main>
        </div>
    </div>
    <%- include('./reusable/script.ejs') %>
    <script src="../public/js/perfil.js"></script>
</body>
</html>